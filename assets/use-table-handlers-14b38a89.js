import{a as y,r as l,z as C}from"./index-e0dafb85.js";function V(s){const{t:d}=y(),o=l(),n=l(),u=l(!1),i=l(!1),a=l(!1),f={...s},g=()=>{o.value.reload()},h=()=>{u.value=!0,a.value=!1,n.value&&n.value.clearValidate()},p=(e,t,r)=>{e({id:t}).then(()=>{r&&r()})},_=e=>{if(s){a.value=!0,u.value=!0;for(const t in s)t in e&&(s[t]=e[t])}},E=()=>{const e={...s};return a.value||delete e.id,e},P=(e,t)=>{!s||!e||n.value.validate(r=>{if(r){i.value=!0;let c;const m=e.getParams?e.getParams():E();a.value?c=e.update(m):c=e.save(m),c.then(b=>{t?t(b):C({message:d("tips.success"),type:"success",showClose:!0}),v(),a.value?o.value.refresh():o.value.reload()}).finally(()=>{i.value=!1})}})},R=()=>{if(s)for(const e in f)s[e]=f[e]},v=()=>{u.value=!1,R()};return{t:d,tableRef:o,dialogVisible:u,isEdit:a,formRef:n,formLoading:i,doAdd:h,doSearch:g,doEdit:_,doClose:v,doRemove:p,doSubmit:P}}export{V as u};
