import{b as V,r as j,c as E,o as q,e as A,f as P,g as l,w as t,h as e,aj as W,ak as L,i as u,t as p,al as O,E as z,j as G}from"./index-e0dafb85.js";import{E as J}from"./el-dialog-75a77bcb.js";import{E as M}from"./el-radio-67ddd841.js";import{E as Q,a as X}from"./el-form-item-01002221.js";import{r as Y,l as Z,a as $,s as ee,u as ae}from"./app-dept-a4302018.js";import{u as le}from"./use-table-handlers-14b38a89.js";const te={class:"main-body"},oe={class:"toolbar"},ce={__name:"Dept",setup(ne){const i=V({name:""}),r=V({id:"",name:"",parentId:null}),{t:a,tableRef:k,dialogVisible:c,isEdit:C,formLoading:de,formRef:B,doSearch:v,doAdd:D,doEdit:I,doRemove:T,doSubmit:w,doClose:f}=le(r),_=j([]),R=E(()=>[{prop:"id",label:a("thead.ID")},{prop:"name",label:a("thead.name")},{prop:"createdBy",label:a("thead.createdBy")},{prop:"createdTime",label:a("thead.createdTime"),minWidth:160},{prop:"lastUpdatedBy",label:a("thead.updatedBy")},{prop:"lastUpdatedTime",label:a("thead.updatedTime"),minWidth:160}]),U=E(()=>({name:[{required:!0,message:a("form.usernameHolder"),trigger:["change","blur"]}]}));function h(n){$(n?{id:n.id}:null).then(o=>{_.value=o.data})}function x(){h(),D()}function S(n){h(n),I(n)}function H(n,o){T(Y,n,o)}function b(){w({save:ee,update:ae})}return(n,o)=>{const y=z,s=X,m=G,g=Q,F=L,K=M,N=J;return q(),A("div",te,[P("div",oe,[l(g,{inline:!0,model:e(i)},{default:t(()=>[l(s,null,{default:t(()=>[l(y,{modelValue:e(i).name,"onUpdate:modelValue":o[0]||(o[0]=d=>e(i).name=d),placeholder:e(a)("thead.name")},null,8,["modelValue","placeholder"])]),_:1}),l(s,null,{default:t(()=>[l(m,{icon:"search",type:"primary",onClick:e(v)},{default:t(()=>[u(p(e(a)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(s,null,{default:t(()=>[l(m,{icon:"plus",type:"primary",onClick:x},{default:t(()=>[u(p(e(a)("action.add")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),l(F,{rowKey:"id",ref_key:"tableRef",ref:k,"get-page":e(Z),filters:e(i),columns:e(R),showBatchDelete:!1,showPagination:!1,onHandleEdit:S,onHandleDelete:H},null,8,["get-page","filters","columns"]),l(N,{title:e(C)?e(a)("action.edit"):e(a)("action.add"),width:"40%",draggable:"",modelValue:e(c),"onUpdate:modelValue":o[3]||(o[3]=d=>W(c)?c.value=d:null),"close-on-click-modal":!1,onClose:e(f)},{footer:t(()=>[l(m,{onClick:e(f)},{default:t(()=>[u(p(e(a)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",onClick:b},{default:t(()=>[u(p(e(a)("action.confirm")),1)]),_:1})]),default:t(()=>[l(g,{model:e(r),rules:e(U),ref_key:"formRef",ref:B,onKeyup:O(b,["enter"]),"label-width":"80px"},{default:t(()=>[l(s,{label:e(a)("thead.name"),prop:"name"},{default:t(()=>[l(y,{modelValue:e(r).name,"onUpdate:modelValue":o[1]||(o[1]=d=>e(r).name=d),placeholder:e(a)("thead.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(s,{label:e(a)("form.parent"),prop:"parentId"},{default:t(()=>[l(K,{modelValue:e(r).parentId,"onUpdate:modelValue":o[2]||(o[2]=d=>e(r).parentId=d),props:{label:"name",value:"id",checkStrictly:!0,emitPath:!1},options:e(_),clearable:"",filterable:"",class:"w100p"},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])])}}};export{ce as default};
