import{aO as f,b as y,c as V,o as I,e as O,f as j,g as l,w as o,h as t,aj as F,ak as A,i as c,t as p,E as L,j as $}from"./index-e0dafb85.js";import{E as z}from"./el-dialog-75a77bcb.js";import{E as G}from"./el-switch-2d4ff51c.js";import{E as J,a as K}from"./el-form-item-01002221.js";import{u as M}from"./use-table-handlers-14b38a89.js";const Q=a=>f({url:"sys/notice/listPage",method:"get",data:a}),X=a=>f({url:"sys/notice/save",method:"post",data:a}),Y=a=>{const{id:s}=a;return delete a.id,f({url:`sys/notice/update/${s}`,method:"post",data:a})},Z=a=>f({url:"sys/notice/delete",method:"post",data:a}),ee={class:"main-body"},te={class:"toolbar"},re={__name:"Notice",setup(a){const s=y({title:""}),E=[{type:"edit",disabled:u=>!!u.publishTime},{type:"delete"}],r=y({id:"",title:"",content:"",isPublish:!1}),{t:e,tableRef:k,dialogVisible:_,isEdit:v,formLoading:w,formRef:C,doSearch:T,doAdd:x,doEdit:R,doClose:h,doSubmit:B,doRemove:W}=M(r),q=V(()=>[{type:"selection"},{prop:"id",label:e("thead.ID"),minWidth:50},{prop:"title",label:e("thead.title"),minWidth:120,showOverflowTooltip:!0},{prop:"content",label:e("thead.content"),minWidth:120,showOverflowTooltip:!0},{prop:"publishTime",label:e("thead.publishTime"),minWidth:120},{prop:"createdTime",label:e("thead.createdTime"),minWidth:120},{prop:"createdBy",label:e("thead.createdBy"),minWidth:120}]),D=V(()=>({title:[{required:!0,message:e("form.titleRequired"),trigger:["blur","change"]},{min:2,max:60,message:e("form.titleError"),trigger:["blur","change"]}],content:[{required:!0,message:e("form.contentRequired"),trigger:["blur","change"]},{min:2,max:300,message:e("form.contentError"),trigger:["blur","change"]}]}));function P(){B({save:X,update:Y})}function S(u,n){W(Z,u,n)}return(u,n)=>{const b=L,d=K,m=$,g=J,U=A,H=G,N=z;return I(),O("div",ee,[j("div",te,[l(g,{inline:!0,model:s},{default:o(()=>[l(d,null,{default:o(()=>[l(b,{modelValue:s.title,"onUpdate:modelValue":n[0]||(n[0]=i=>s.title=i),placeholder:t(e)("thead.title")},null,8,["modelValue","placeholder"])]),_:1}),l(d,null,{default:o(()=>[l(m,{type:"primary",icon:"search",onClick:t(T)},{default:o(()=>[c(p(t(e)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(d,null,{default:o(()=>[l(m,{type:"primary",icon:"plus",onClick:t(x)},{default:o(()=>[c(p(t(e)("action.add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l(U,{ref_key:"tableRef",ref:k,"get-page":t(Q),filters:s,columns:q.value,operations:E,onHandleEdit:t(R),onHandleDelete:S},null,8,["get-page","filters","columns","onHandleEdit"]),l(N,{title:t(v)?t(e)("action.edit"):t(e)("action.add"),modelValue:t(_),"onUpdate:modelValue":n[4]||(n[4]=i=>F(_)?_.value=i:null),width:"40%",draggable:"","close-on-click-modal":!0,onClose:t(h)},{footer:o(()=>[l(m,{onClick:t(h)},{default:o(()=>[c(p(t(e)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",loading:t(w),onClick:P},{default:o(()=>[c(p(t(e)("action.submit")),1)]),_:1},8,["loading"])]),default:o(()=>[l(g,{ref_key:"formRef",ref:C,model:r,rules:D.value,"label-width":"80px","label-position":"right"},{default:o(()=>[l(d,{label:t(e)("thead.title"),prop:"title"},{default:o(()=>[l(b,{modelValue:r.title,"onUpdate:modelValue":n[1]||(n[1]=i=>r.title=i)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:t(e)("thead.content"),prop:"content"},{default:o(()=>[l(b,{type:"textarea",modelValue:r.content,"onUpdate:modelValue":n[2]||(n[2]=i=>r.content=i),"words-limit":300},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:t(e)("form.publish")},{default:o(()=>[l(H,{modelValue:r.isPublish,"onUpdate:modelValue":n[3]||(n[3]=i=>r.isPublish=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])])}}};export{re as default};
